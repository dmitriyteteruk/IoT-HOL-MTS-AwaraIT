### 02.1. Запуск виртуальной машины в Azure Stack Hub МТС
На данном этапе мы создадим виртуальную машину в **Azure Stack Hub**, который расположен в дата-центре МТС.
Данная виртуальная машина будет нам заменять физический компьютер (шлюз), который считывает показания со счетчиков/сенсоров. 
На виртуальной машине мы запустим операционную систему Ubuntu 18.04.

1. Для создания виртуальной машины в Azure Stack Hub необходимо авторизоваться на портале **https://portal.azuremsk.ec.mts.ru/**. 
Для авторизации используйте учетные данные, которые вам были присланы после подтверждения регистрации.

2. После авторизации на портале нажмите в меню слева кнопку **+Создать ресурс**
![image](https://user-images.githubusercontent.com/34028526/155129792-25776ec8-6adf-4224-a313-f1302ca25dd6.png)

---

3. В меню доступных ресурсов выберите пункт **Вычисления**, а затем выберите среди доступных образов **Ubuntu Server 18.04 LTS**.
![image](https://user-images.githubusercontent.com/34028526/155130091-4284c8be-b90e-46f6-aa1d-75003dc8102a.png)

---

4. На странице создания вирутальной машины необходимо указать параметры будущей ВМ. На вкладке **Основные** в разделе **Сведения о проекте** проверьте, 
что выбрана ваша тестовая (evaluation) подписка. 
_**ВАЖНО!**_ Подписки Azure Stack Hub и Azure отличаются друг от друга и не заменяют друг друга. 
В пункте **Группа ресурсов** нажмите **Создать** и укажите название **my-rg** и нажмите **ОК**.

![image](https://user-images.githubusercontent.com/34028526/155131910-ebb8a642-84f5-467e-bb79-0c070e6dfbbe.png)

---

5. В разделе **Подробности об экземпляре** укажите следующие параметры:

| Параметр | Значение | 
|---------|--------|
| Имя виртуальной машины | iot-edge-gw |
| Регион | azuremsk |
| Параметр доступности | Избыточность инфраструктуры не требуется |
| Изображение | Ubuntu Server 18.04 LTS - поколение 1 |
| Размер | Standard A1 v2 |

Для изменения размера экземпляра ВМ нажмите **Изменить размер**. В окне выбора размера виртуальной машины нажмите на 
стрелочку напотив названия серии **Серия А версии 2** и в открывшемся списке выберите **А1_v2**, а затем нажмите **Выбор**.

![image](https://user-images.githubusercontent.com/34028526/155135616-f6e1c273-6c8a-40b5-abdf-913504331372.png)

В результате у вас должны получиться настройки экземпляра как на рисунке ниже.

![image](https://user-images.githubusercontent.com/34028526/155135132-084e28c4-b8de-4a1c-b684-ae2c7f9e9311.png)

---

6. В разделах **Учетная запись администратора** и **Правила входящего порта** укажите нижеследующие параметры:

| Параметр | Значение | 
|---------|--------|
| Тип проверки подлинности | Пароль |
| Имя пользователя | azurestackuser |
| Пароль | HOLpassword123! |
| Общедоступные входящие порты | Разрешить выбранные порты |
| Выбрать входящие порты | SSH (22) |

Нажмите **Просмотр и создание**.

![image](https://user-images.githubusercontent.com/34028526/155136847-913e3711-763e-473a-8f13-2c1eb2db9514.png)

---

7. На странице **Просмотр и создание** убедитесь, что **Проверка пройдена** и нажмите кнопку **Создать**.

![image](https://user-images.githubusercontent.com/34028526/155146698-664196aa-53d3-4b98-bcb2-8451b6911d84.png)

---

8. Развертывание виртуальной машины может занять несколько минут. После успешного развертывания перейдите на страницу созданной виртуальной машины. Для этого в общем меню выберите пункт **Вирутальные машины** и в списке справа вы должны увидить ссылку на вирутуальную машину с именем **iot-edge-gw**. 

![image](https://user-images.githubusercontent.com/34028526/155148074-7f8fcd29-8918-4b55-b31f-09115d33dfe7.png)

---

Следующий этап **Установка Azure IoT Edge**.
   
